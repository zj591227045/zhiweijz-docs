# 部署概述

## 部署方式选择

只为记账支持多种部署方式，您可以根据自己的需求和技术水平选择最适合的部署方案。

### 🐳 Docker部署（推荐）

**适合人群**: 有一定技术基础，希望快速部署的用户

**优势**:
- ✅ 一键部署，环境隔离
- ✅ 自动处理依赖关系
- ✅ 支持自动更新
- ✅ 跨平台兼容

**部署时间**: 5-10分钟

[📖 查看Docker部署指南](docker.md)

### 💻 开发环境部署

**适合人群**: 开发者、需要自定义功能的高级用户

**优势**:
- ✅ 完全控制源代码
- ✅ 可以自定义功能
- ✅ 便于调试和开发
- ✅ 性能最优

**部署时间**: 15-30分钟

[📖 查看开发环境部署指南](development.md)

### 🏠 NAS平台部署

**适合人群**: 拥有NAS设备，希望私有化部署的用户

**优势**:
- ✅ 数据完全私有
- ✅ 7x24小时运行
- ✅ 低功耗
- ✅ 易于管理

**支持平台**:
- 群晖 Synology
- 威联通 QNAP
- 绿联 UGREEN
- 极空间 Zspace
- 铁威马 TerraMaster

[📖 查看NAS部署指南](nas/README.md)

## 系统要求

### 最低配置要求

| 组件 | 最低要求 | 推荐配置 |
|------|----------|----------|
| **CPU** | 1核心 1GHz | 2核心 2GHz+ |
| **内存** | 512MB | 2GB+ |
| **存储** | 1GB可用空间 | 10GB+ |
| **网络** | 100Mbps | 1Gbps |
| **操作系统** | Linux/Windows/macOS | Ubuntu 20.04+ |

### 软件依赖

#### Docker部署
- Docker 20.10+
- Docker Compose 2.0+

#### 开发环境部署
- Node.js 18+
- PostgreSQL 12+
- Redis 6+ (可选)

#### NAS部署
- 支持Docker的NAS系统
- 至少1GB可用内存

## 网络要求

### 端口配置

| 服务 | 默认端口 | 说明 |
|------|----------|------|
| Web前端 | 3001 | 用户访问界面 |
| API后端 | 3000 | 后端API服务 |
| 数据库 | 5432 | PostgreSQL数据库 |
| Redis | 6379 | 缓存服务（可选） |

### 防火墙设置

确保以下端口在防火墙中开放：
- **3001**: Web前端访问端口
- **3000**: API后端服务端口（如果需要外部访问）

### 域名配置（可选）

如果您希望通过域名访问，需要：
1. 配置域名解析到服务器IP
2. 配置反向代理（Nginx/Apache）
3. 申请SSL证书（推荐Let's Encrypt）

## 数据库选择

### PostgreSQL（推荐）
- ✅ 功能强大，性能优秀
- ✅ 支持复杂查询和事务
- ✅ 数据一致性保障
- ✅ 丰富的扩展功能

### SQLite（轻量级）
- ✅ 无需单独安装数据库
- ✅ 适合小规模使用
- ✅ 部署简单
- ❌ 并发性能有限

### MySQL（兼容性）
- ✅ 广泛使用，兼容性好
- ✅ 丰富的工具支持
- ✅ 性能稳定
- ❌ 功能相对简单

## 存储配置

### 本地存储
- **数据目录**: `/data` (可自定义)
- **日志目录**: `/logs` (可自定义)
- **备份目录**: `/backups` (可自定义)
- **上传目录**: `/uploads` (头像、附件等)

### 云存储（可选）
支持以下云存储服务：
- **阿里云OSS**: 国内访问速度快
- **腾讯云COS**: 性价比高
- **AWS S3**: 全球覆盖
- **MinIO**: 私有化对象存储

## 安全配置

### 基础安全
- 🔒 修改默认密码
- 🔒 启用HTTPS访问
- 🔒 配置防火墙规则
- 🔒 定期更新系统

### 高级安全
- 🛡️ 配置反向代理
- 🛡️ 启用访问日志
- 🛡️ 配置入侵检测
- 🛡️ 定期安全审计

## 监控与维护

### 系统监控
- **资源监控**: CPU、内存、磁盘使用率
- **服务监控**: 应用服务状态检查
- **性能监控**: 响应时间、吞吐量
- **错误监控**: 异常日志和错误统计

### 备份策略
- **自动备份**: 每日自动备份数据库
- **增量备份**: 减少备份时间和存储空间
- **异地备份**: 备份到不同位置保障安全
- **恢复测试**: 定期测试备份恢复流程

### 更新维护
- **版本更新**: 关注新版本发布
- **安全补丁**: 及时应用安全更新
- **性能优化**: 定期清理和优化
- **容量规划**: 监控存储使用情况

## 故障排除

### 常见问题
1. **服务无法启动**: 检查端口占用和权限
2. **数据库连接失败**: 验证数据库配置和网络
3. **页面无法访问**: 检查防火墙和代理配置
4. **性能问题**: 监控资源使用和优化配置

### 获取帮助
- 📖 [故障排除指南](troubleshooting.md)
- 💬 [社区支持](../support/contact.md)
- 🐛 [问题反馈](../support/feedback.md)

---

## 下一步

选择适合您的部署方式：

1. 🐳 [Docker部署](docker.md) - 快速开始
2. 💻 [开发环境部署](development.md) - 完全控制
3. 🏠 [NAS部署](nas/README.md) - 私有化部署

> 💡 **建议**: 如果您是第一次部署，推荐使用Docker方式，简单快捷且不容易出错。
